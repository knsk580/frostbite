<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI チャット</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=BIZ+UDPGothic:wght@400;700&display=swap');

        * {
            font-family: 'BIZ UDPGothic', sans-serif;
        }

        body {
            height: 100vh;
            overflow: hidden;
            font-family: 'BIZ UDPGothic', sans-serif;
        }

        .container-fluid {
            height: calc(100vh - 2rem);
        }

        .chat-container {
            height: 400px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
            border-radius: 0.375rem;
            padding: 1rem;
            background-color: white;
        }

        .output-container {
            height: 500px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
            border-radius: 0.375rem;
            padding: 1rem;
            background-color: #f8f9fa;
        }

        .json-display {
            background-color: #2d3748;
            color: #e2e8f0;
            border-radius: 0.375rem;
            padding: 1rem;
            margin: 0;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            line-height: 1.5;
            overflow-x: auto;
            white-space: pre-wrap;
            word-break: break-all;
        }

        /* Prism.js のスタイルを上書き
        .json-display pre[class*="language-"] {
            background: #2d3748 !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        .json-display code[class*="language-"] {
            background: #2d3748 !important;
            color: #e2e8f0 !important;
        }
 */
        .debug-section {
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 1rem;
            margin-bottom: 1rem;
        }

        .debug-section h6 {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        /* Markdownスタイリング */
        .ai-message h1,
        .ai-message h2,
        .ai-message h3,
        .ai-message h4,
        .ai-message h5,
        .ai-message h6 {
            margin-top: 1rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .ai-message h1 {
            font-size: 1.5rem;
        }

        .ai-message h2 {
            font-size: 1.3rem;
        }

        .ai-message h3 {
            font-size: 1.1rem;
        }

        .ai-message h4 {
            font-size: 1rem;
        }

        .ai-message p {
            margin-bottom: 0.75rem;
            line-height: 1.6;
        }

        .ai-message ul,
        .ai-message ol {
            margin-bottom: 0.75rem;
            padding-left: 1.5rem;
        }

        .ai-message li {
            margin-bottom: 0.25rem;
        }

        .ai-message code {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 0.25rem;
            padding: 0.125rem 0.25rem;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
        }

        .ai-message pre {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 0.375rem;
            padding: 0.75rem;
            margin-bottom: 0.75rem;
            overflow-x: auto;
        }

        .ai-message pre code {
            background: none;
            border: none;
            padding: 0;
        }

        .ai-message blockquote {
            border-left: 4px solid #007bff;
            margin: 0.75rem 0;
            padding-left: 1rem;
            color: #6c757d;
            font-style: italic;
        }

        .ai-message table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 0.75rem;
        }

        .ai-message th,
        .ai-message td {
            border: 1px solid #dee2e6;
            padding: 0.375rem 0.75rem;
            text-align: left;
        }

        .ai-message th {
            background-color: #f8f9fa;
            font-weight: 600;
        }

        .ai-message a {
            color: #007bff;
            text-decoration: none;
        }

        .ai-message a:hover {
            text-decoration: underline;
        }

        .ai-message strong {
            font-weight: 600;
        }

        .ai-message em {
            font-style: italic;
        }

        .message {
            margin-bottom: 1rem;
            padding: 0.75rem;
            border-radius: 0.5rem;
            max-width: 80%;
        }

        .user-message {
            background-color: #f8f9fa;
            color: #212529;
            margin-left: auto;
            border: 1px solid #dee2e6;
        }

        .ai-message {
            background-color: transparent;
            border: none;
            margin-right: auto;
            padding-left: 0;
            padding-right: 0;
        }

        .typing-indicator {
            display: none;
            margin-right: auto;
            max-width: 80%;
        }

        .typing-dots {
            display: inline-block;
            width: 40px;
            height: 20px;
            background-color: #6c757d;
            border-radius: 10px;
            position: relative;
        }

        .typing-dots::before {
            content: '';
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: white;
            left: 8px;
            top: 7px;
            animation: typing 1.5s infinite;
        }

        .typing-dots::after {
            content: '';
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: white;
            left: 18px;
            top: 7px;
            animation: typing 1.5s infinite 0.5s;
        }

        @keyframes typing {

            0%,
            60%,
            100% {
                transform: translateY(0);
            }

            30% {
                transform: translateY(-10px);
            }
        }
    </style>
</head>

<body>
    <div class="container-fluid mt-4">
        <div class="row h-100">
            <!-- 左側: チャットエリア (40%) -->
            <div class="col-4">
                <div class="card h-100">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">
                            <i class="bi bi-chat-dots"></i>
                            AI チャット
                        </h5>
                    </div>
                    <div class="card-body d-flex flex-column">
                        <div id="chatContainer" class="chat-container mb-3 flex-grow-1">
                            <div class="message ai-message">
                                <p>こんにちは！何かご質問があれば、お気軽にお聞きください。</p>
                            </div>
                        </div>
                        <div class="typing-indicator message" id="typingIndicator">
                            <div class="typing-dots"></div>
                            <span class="ms-2 text-muted">AIが入力中...</span>
                        </div>
                        <form id="chatForm">
                            <div class="mb-0">
                                <textarea id="messageInput" class="form-control" rows="3"
                                    placeholder="メッセージを入力してください..." required></textarea>
                            </div>
                        </form>
                    </div>
                    <div class="card-footer">
                        <small class="text-muted">
                            <i class="bi bi-keyboard"></i>
                            Enterで送信、Shift+Enterで改行
                        </small>
                    </div>
                </div>
            </div>

            <!-- 右側: 出力エリア (60%) -->
            <div class="col-8">
                <div class="card h-100">
                    <div class="card-header bg-secondary text-white">
                        <h5 class="mb-0">
                            <i class="bi bi-file-text"></i>
                            出力エリア
                        </h5>
                    </div>
                    <div class="card-body">
                        <div id="outputContainer" class="output-container">
                            <div id="placeholderMessage" class="text-center text-muted mt-5">
                                <i class="bi bi-file-text-fill" style="font-size: 3rem;"></i>
                                <p class="mt-3">ここに出力が表示されます</p>
                                <small>現在は何も出力されていません</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@9.1.6/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="script.js"></script>
</body>

</html>